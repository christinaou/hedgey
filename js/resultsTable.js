// **NOT NEEDED WHEN CONNECTED TO REST

var resultUser = [
	{
	    'username': 'Christina',
	    'channelID': 'UCd3fDHHkIQQyfuDzMPhdPOg',
	    'thumbnailURL': 'http://www.essetinoconnexions.com/wp-content/uploads/2015/08/default.jpg',
	    'description': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse in ligula suscipit, vehicula mi sit amet, fermentum nisi. Suspendisse ac accumsan nulla. Nullam eget tortor metus. Sed mattis quis nisi in vestibulum. Fusce nisl eros, maximus vel risus porta, dapibus imperdiet purus. Donec vel dolor lobortis, posuere lacus non, tempus tortor. Maecenas ullamcorper nisi ipsum, vel tincidunt enim rhoncus in. Aenean auctor purus vitae metus gravida vestibulum et non nulla. Etiam auctor quam lorem, vulputate viverra odio mollis id. Donec accumsan consequat mi, faucibus luctus mi semper id. Aliquam rhoncus, nisl ultricies ultrices pharetra, urna arcu suscipit nisl, non placerat nibh sem ac dolor.',
	    'stmTopics': {
	        'fox':   0.09802436968682578,
	        'eagle': 0.07470253817458399,
	        'cat':    0.05341624539023923,
	        'eagles':    0.04495052033839845,
	        'animals':    0.04409588380720322,
	        'love': 0.043155299659157015,
	        'know':     0.03548190554642108,
	        'awesome':      0.028861208568765215,
	        'care':    0.01578905454286349,
	        'try':    0.015230199413481542
	    },
	    'uploadVideos': [
	        {
	            'videoData': {
	                'id': '7Bt3fLSfpuw',
	                'title': '15-112 Term Project: 3D Aquarium Simulator'
	            }
	        },
	        {
	            'videoData': {
	                'id': 'Zbj3gH4vP8Q',
	                'title': 'Fight or Flight Response Pathway'
	            }
	        },
	        {
	            'videoData': {
	                'id': 'bkKIPVgqcuY',
	                'title': 'Only One Dance Tutorial Practice'
	            }
	        }  
	    ],
	    'subscriptions': [
	        {
	            'title': 'Kurt Hugo Schneider',
	            'id': 'UCplkk3J5wrEl0TNrthHjq4Q'
	        },
	        {
	            'title': 'StromaeVEVO',
	            'id': 'UCFKo78ysxmRhoQ85ySEo_PQ'
	        },
	        {
	            'title': 'JennaMarbles',
	            'id': 'UC9gFih9rw0zNCK3ZtoKQQyA'
	        }
	    ],
	    'likedVideos': []
	},

	{
	    'username': 'Matt Steffanina',
	    'channelID': 'MattSDance',
	    'thumbnailURL': 'http://www.essetinoconnexions.com/wp-content/uploads/2015/08/default.jpg',
	    'description': 'Choreographer & Entrepreneur from Los Angeles, CA!  For business inquiries only, contact: MattSteffanina@gmail.com' +
			'\nTwitter, IG & Vine: @MattSteffanina' + 
			'\nWebsite: www.MattSteffanina.com' +
			'\nLearn how to dance with my TUTORIAL channel: http://www.youtube.com/DanceTutorialsLIVE',
	    'stmTopics': {
	        'fox':   0.09802436968682578,
	        'eagle': 0.07470253817458399,
	        'cat':    0.05341624539023923,
	        'eagles':    0.04495052033839845,
	        'animals':    0.04409588380720322,
	        'love': 0.043155299659157015,
	        'know':     0.03548190554642108,
	        'awesome':      0.028861208568765215,
	        'care':    0.01578905454286349,
	        'try':    0.015230199413481542
	    },
	    'uploadVideos': [
	        {
	            'videoData': {
	                'id': '7Bt3fLSfpuw',
	                'title': '15-112 Term Project: 3D Aquarium Simulator'
	            }
	        },
	        {
	            'videoData': {
	                'id': 'Zbj3gH4vP8Q',
	                'title': 'Fight or Flight Response Pathway'
	            }
	        },
	        {
	            'videoData': {
	                'id': 'bkKIPVgqcuY',
	                'title': 'Only One Dance Tutorial Practice'
	            }
	        }  
	    ],
	    'subscriptions': [
	        {
	            'title': 'Kurt Hugo Schneider',
	            'id': 'UCplkk3J5wrEl0TNrthHjq4Q'
	        },
	        {
	            'title': 'StromaeVEVO',
	            'id': 'UCFKo78ysxmRhoQ85ySEo_PQ'
	        },
	        {
	            'title': 'JennaMarbles',
	            'id': 'UC9gFih9rw0zNCK3ZtoKQQyA'
	        }
	    ],
	    'likedVideos': []
	}
];

var resultVid = [
	{
		'videoData': {
			'id': 'NSEd6O0bBFs',
			'title': 'An eagle, a fox and my cat all getting along fine' +
			' on my porch',
			'channelID': 'UCZEM_gswfc_hoEVKlh8kZpQ',
			'type': 'YouTube',
			'genre': 'Pets & Animals',
			'channelName': 'Pam Aus',
			'publishedDate': 'Mar 25, 2012',
			'description': 'First of all just let me explain the hot water ' + 
			'heater! My hot water heater leaked and flooded my kitchen and so I ' +
			'just went through getting it replaced.  We have had so much snow ' + 
			'(it\'s melting now) that it was too hard to carry it through all ' + 
			'the snow to get to the landfill so it and other building materials ' +
			'are hanging out on my porch until more snow is gone.  See how the ' + 
			'fox, eagle and cat are all just fine hanging out and no one is ' + 
			'trying to attack anyone and they are getting along just fine?  ' + 
			'Notice the eagle in the background on the lamp post down by the ' + 
			'street.  That is the partner to this eagle. They aren\'t always ' +
			'out to attack and kill each other.  Our fox and eagles and cats ' + 
			'basically get along just fine here.  Sometimes if there is food ' + 
			'they might fight over the food some.  I live in Unalaska, Alaska ' +
			'in the Aleutian Islands.  Also, earlier in the day when the fox ' + 
			'first came Gizmo my cat went right up to the fox and told him to ' + 
			'leave.  It was too funny!  But the fox came right back!'
		},
		'NSEd6O0bBFs': {
			'popularity': 1,
			'sentimentScore': 0,
			'peakDaysAfter': 3,
			'numVideosOnChannel': 10,
			'numTopicDetails': 3.0,
			'subscribersToViews': 0.3114,
			'numCommentsToViews': 0.134091203431532,
			'titleLength': 56,
			'publishMonth': 10,
			'avgLenComments': 52.134123,
			'durationToViews': 0.13430420359093480,
			'likesToDislikes': 1.94024,
			'viewsToDaysActive': 5.3014921243,
			'bingMentions': 143904,
			'numRepliesToNumComments': 0.3049214,
			'descrpLength': 138,
			'subscriberCount': 120391,
			'likesToViews': 0.123412,
			'definition': 1,
			'captioning': 0,
			'categoryID': 9
		},
		'stmTopics': {
			'fox':   0.09802436968682578,
	    	'eagle': 0.07470253817458399,
	    	'cat':    0.05341624539023923,
	    	'eagles':    0.04495052033839845,
	    	'animals':    0.04409588380720322,
	    	'love': 0.043155299659157015,
	    	'know':     0.03548190554642108,
	    	'awesome':      0.028861208568765215,
	    	'care':    0.01578905454286349,
	    	'try':    0.015230199413481542
		}
	},

	{
		'videoData': {
			'id': '_OBlgSz8sSM',
			'title': 'Charlie bit my finger - again !',
			'channelID': 'UCfHZCZHykS3IQDPyFfnqjWg',
			'type': 'YouTube',
			'genre': 'Comedy',
			'channelName': 'HDCYT',
			'publishedDate': 'May 22, 2007',
			'description': 'Charlie bit my finger - again ! Subscribe here: http://bit.ly/1oHVuUM \nEven had I thought of trying to get my boys to do this I probably couldn\'t have. Neither were coerced into any of this and neither were hurt (for very long anyway).  This was just one of those moments when I had the video camera out because the boys were being fun and they provided something really very funny.First of all just let me explain the hot water ' 
		},
		'_OBlgSz8sSM': {
			'popularity': 1,
			'sentimentScore': 0,
			'peakDaysAfter': 3,
			'numVideosOnChannel': 10,
			'numTopicDetails': 3.0,
			'subscribersToViews': 0.3114,
			'numCommentsToViews': 0.134091203431532,
			'titleLength': 56,
			'publishMonth': 10,
			'avgLenComments': 52.134123,
			'durationToViews': 0.13430420359093480,
			'likesToDislikes': 1.94024,
			'viewsToDaysActive': 5.3014921243,
			'bingMentions': 143904,
			'numRepliesToNumComments': 0.3049214,
			'descrpLength': 138,
			'subscriberCount': 120391,
			'likesToViews': 0.123412,
			'definition': 1,
			'captioning': 0,
			'categoryID': 9
		},
		'stmTopics': {
			'code': 0.0037468721011787594,
		    'appstore': 0.008520554993397019,
		    'android': 0.010988450110858899,
		    'the﻿': 0.009800059683676515,
		    'of﻿': 0.00418127106948121,
		    'redeem': 0.00918111785315605,
		    'video': 0.03486693045849008,
		    'ipod': 0.013885262489924022,
		    'gay': 0.020669160662358854,
		    'charlie': 0.02225005151063605
		}
	},

	{
		'videoData': {
			'id': 'aFztjgfDWDA',
			'title': 'Cat Laser Bowling',
			'channelID': 'UC4bSquKE2fVxFx5t_YN9f_w',
			'type': 'YouTube',
			'genre': 'Pets & Animals',
			'channelName': 'Yasmin Fox',
			'publishedDate': 'Aug 28, 2009',
			'description': 'involves cat, cups, towel and  laser. product of dad being bored one afternoon'
		},
		'aFztjgfDWDA': {
			'popularity': 1,
			'sentimentScore': 0,
			'peakDaysAfter': 3,
			'numVideosOnChannel': 10,
			'numTopicDetails': 3.0,
			'subscribersToViews': 0.3114,
			'numCommentsToViews': 0.134091203431532,
			'titleLength': 56,
			'publishMonth': 10,
			'avgLenComments': 52.134123,
			'durationToViews': 0.13430420359093480,
			'likesToDislikes': 1.94024,
			'viewsToDaysActive': 5.3014921243,
			'bingMentions': 143904,
			'numRepliesToNumComments': 0.3049214,
			'descrpLength': 138,
			'subscriberCount': 120391,
			'likesToViews': 0.123412,
			'definition': 1,
			'captioning': 0,
			'categoryID': 9
		},
		'stmTopics': {
			'cats': 0.06466312814790869,
		    'laser': 0.056346694144421304,
		    'rwj': 0.053192487773340145,
		    'william': 0.03525037364666999,
		    'like': 0.08182180264163537,
		    'cat': 0.10379029926536541,
		    'know': 0.029075212331937522,
		    'video': 0.06705252690034302,
		    'cups': 0.05364425623205247,
		    'Johnson': 0.027959706915197394
		}
	}
];



$(function(){
    $('.dropdown-menu li a').click(function() {
      $('.btn.btn-primary:first-child').text($(this).text());
      $('.btn.btn-primary:first-child').val($(this).text());
      $('#input-text').attr('placeholder', 'Enter ' + $(this).text() + ' to query by...');
   });

});



var topic;

var btn = document.getElementById('my-btn');
btn.addEventListener('click', function(){

	topic = document.getElementById('input-text').value;
	$('#results-table').empty();
	
	document.getElementById('total').style.display = 'block';
	document.getElementById('video').style.display = 'none';
    document.getElementById('user').style.display = 'none';
	document.getElementById('results').style.display = 'block';
	document.getElementById('query').innerHTML = topic;


	console.log($('.btn.btn-primary:first-child').val());
	// var url = 'http://192.168.10.112:8080/youtube-rest/rest/youtube/' + query + '/' + type; //replace with correct url

	// xhr.onreadystatechange = function() {
	// 	if (xhr.readyState == 4 && xhr.status == 200) {
	// 		var resp = JSON.parse(xhr.responseText);
	// 		// pass in resp variable or nah????
	// 		makeTable();
	// 	}
	// }

	// xhr.open('GET', url, true);
	// xhr.send();
	
	
	makeTable(); // **NOT NEEDED WHEN CONNECTED TO REST

	$('html, body').animate({
    	scrollTop: $('#results').offset().top
    	}, 1700);

	$('.table-center').animate({'left':'22em'}, 'slow');
	$('#results').removeClass('col-md-3').addClass('results-center');
	$('.table-center').css('width', '50%');

	var prev;

	$(document).ready(function($) {
		$('.clickable-section').click(function() {

			$('.table-center').animate({'left':'0em'}, 'slow');
			$('#results').removeClass('results-center').addClass('col-md-3');
			$('.table-center').css('width', '100%');
			
			

			var total = $(this).context.id;
			var type = total[0];
			var resID = total.substring(1);

			$('#' + prev).toggleClass('table-click');
			$('#' + total).toggleClass('table-click');
			prev = total;

			if (type == 'V') {
				for (var i = 0; i < resultVid.length; i++) {
					var vid = resultVid[i];
					if (vid.videoData.id == resID) {
						showVideo(vid);
						break;
					}
				}
			}
			else if (type == 'U') {
				for (var i = 0; i < resultUser.length; i++) {
					var u = resultUser[i];
					if (u.channelID == resID) {
						showUser(u);
						break;
					}
				}
			}	
		});
	});
});

function makeTable() {
	var thead = makeTHead();
	var tbody = makeTBody();
	document.getElementById('results-table').appendChild(thead);
	document.getElementById('results-table').appendChild(tbody);
}

function makeTHead() {
	var thead = document.createElement('thead');
	var tr = document.createElement('tr');

	var thUser = document.createElement('th');
	thUser.appendChild(document.createTextNode('User'));
	var thVid = document.createElement('th');
	thVid.appendChild(document.createTextNode('Video'));

	tr.appendChild(thUser);
	tr.appendChild(thVid);
	thead.appendChild(tr);
	return thead;
}

function makeTBody() {
	var tbody = document.createElement('tbody');
	var condition = Math.max(resultUser.length, resultVid.length);
	for (var i = 0; i < condition; i++) {
		addTr(resultUser[i], resultVid[i], tbody);		
	}
	return tbody;
}

function addTr(user, vid, tbody) {
	var tr = document.createElement('tr');
	var tdUser = document.createElement('td');
	if (user != null) {
		tdUser.appendChild(document.createTextNode(user.username));
		tdUser.className = 'table-section clickable-section';
		tdUser.id = 'U' + user.channelID;
	}


	var vidData = vid.videoData;
	var tdVid = document.createElement('td');
	if (vid != null) {
		tdVid.appendChild(document.createTextNode(vidData.title));
		tdVid.className = 'table-section clickable-section';
		tdVid.id = 'V' + vidData.id;
	}

	tr.appendChild(tdUser);
	tr.appendChild(tdVid);
	tbody.appendChild(tr);
}